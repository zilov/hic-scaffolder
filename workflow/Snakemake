from pathlib import Path, PurePath

OUTDIR = config["outdir"]
GENOME = config["genome"]
FORWARD_READ = config["forward_read"]
REVERSE_READ = config["reverse_read"]
MODE = config["mode"]
THREADS = ["threads"]
GENOME_DIR = Path(GENOME).parent.resolve()

PREFIX = PurePath(GENOME).stem

## create symlink to genome to not create index files in genome folder

if not Path(f"{OUTDIR}/genome").exists():
    Path(f"{OUTDIR}/genome").mkdir()
if not Path(f"{OUTDIR}/genome/{PREFIX}.fasta").exists():
    Path(f"{OUTDIR}/genome/{PREFIX}.fasta").symlink_to(GENOME)
GENOME = f"{OUTDIR}/genome/{PREFIX}.fasta"




rule all:
    input:
        eggnog = f"{OUTDIR}/eggnog/{PREFIX}.emapper.annotations",
        busco =  f"{OUTDIR}/busco/{PREFIX}_specific.txt" if BUSCO_LINEAGE else "",
        
    